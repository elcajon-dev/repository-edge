---
name: Repository Updater

# yamllint disable-line rule:truthy
on:
  repository_dispatch:
    types: ["update"]

jobs:
  token:
      name: ðŸ”£ Generate App Token
      uses: tibdex/github-app-token@v1
      id: token
      with:
        app_id: ${{ secrets.APP_ID }}
        private_key: ${{ secrets.APP_SECRET }}
  workflows:
      uses: hassio-addons/workflows/.github/workflows/repository-updater.yaml@main
      needs: token
      secrets:
        UPDATER_TOKEN: ${{ needs.token.outputs.token }}
